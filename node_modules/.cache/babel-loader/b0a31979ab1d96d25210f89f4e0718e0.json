{"ast":null,"code":"var _jsxFileName = \"/Users/ashokpenikalapati/Desktop/AP089966/Projects/hackathon_cerner/src/LoginWithHooks.jsx\";\nimport React, { useReducer, useEffect, useRef, useState } from 'react';\nimport HomePage from './HomePage';\nimport { verifyLogin } from './utils';\nconst initialState = {\n  username: '',\n  password: '',\n  isLoading: false,\n  isLoggedIn: false,\n  error: ''\n};\n\nfunction loginReducer(state, action) {\n  switch (action.type) {\n    case 'field':\n      {\n        return { ...state,\n          [action.fieldName]: action.payload\n        };\n      }\n\n    case 'login':\n      {\n        return { ...state,\n          error: '',\n          isLoading: true,\n          isFocused: true\n        };\n      }\n\n    case 'success':\n      {\n        return { ...state,\n          isLoggedIn: true,\n          isLoading: false\n        };\n      }\n\n    case 'error':\n      {\n        return { ...state,\n          error: 'Incorrect username or password entered',\n          isLoggedIn: false,\n          isLoading: false,\n          username: '',\n          password: '',\n          isFocused: true\n        };\n      }\n\n    case 'logout':\n      {\n        return { ...state,\n          isLoggedIn: false,\n          username: '',\n          password: '',\n          error: ''\n        };\n      }\n\n    default:\n      return state;\n  }\n}\n\nexport default function LoginWithReducer() {\n  const [state, dispatch] = useReducer(loginReducer, initialState);\n  const {\n    username,\n    password,\n    isLoading,\n    isLoggedIn,\n    error,\n    isFocused\n  } = state;\n  const usernameRef = useRef(null);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    dispatch({\n      type: verifyLogin\n    });\n\n    try {\n      await verifyLogin({\n        username,\n        password\n      });\n      dispatch({\n        type: 'success'\n      });\n    } catch (error) {\n      dispatch({\n        type: 'error'\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (isFocused) {\n      usernameRef.current.focus();\n    }\n  }, [isFocused]);\n\n  const handleLogout = () => {\n    localStorage.setItem(\"logged_in\", false);\n    dispatch({\n      type: 'logout'\n    });\n    setLoggedIn(false);\n    console.log('logged out');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, loggedIn ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(HomePage, {\n    username: username,\n    logout: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, error && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 23\n    }\n  }, error, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"Please Login!\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    ref: usernameRef,\n    placeholder: \"Enter username\",\n    value: username,\n    autoFocus: true,\n    onChange: e => dispatch({\n      type: 'field',\n      fieldName: 'username',\n      payload: e.currentTarget.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Enter password\",\n    value: password,\n    onChange: e => dispatch({\n      type: 'field',\n      fieldName: 'password',\n      payload: e.currentTarget.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"submit\",\n    type: \"submit\",\n    disabled: isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, isLoading ? 'Logging In.....' : 'Log In'))));\n}","map":{"version":3,"names":["React","useReducer","useEffect","useRef","useState","HomePage","verifyLogin","initialState","username","password","isLoading","isLoggedIn","error","loginReducer","state","action","type","fieldName","payload","isFocused","LoginWithReducer","dispatch","usernameRef","handleSubmit","e","preventDefault","current","focus","handleLogout","localStorage","setItem","setLoggedIn","console","log","loggedIn","currentTarget","value"],"sources":["/Users/ashokpenikalapati/Desktop/AP089966/Projects/hackathon_cerner/src/LoginWithHooks.jsx"],"sourcesContent":["import React, { useReducer, useEffect, useRef, useState } from 'react';\r\nimport HomePage from './HomePage';\r\nimport { verifyLogin } from './utils';\r\n\r\nconst initialState = {\r\n  username: '',\r\n  password: '',\r\n  isLoading: false,\r\n  isLoggedIn: false,\r\n  error: ''\r\n};\r\n\r\nfunction loginReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'field': {\r\n      return {\r\n        ...state,\r\n        [action.fieldName]: action.payload\r\n      };\r\n    }\r\n    case 'login': {\r\n      return {\r\n        ...state,\r\n        error: '',\r\n        isLoading: true,\r\n        isFocused: true\r\n      };\r\n    }\r\n    case 'success': {\r\n      return {\r\n        ...state,\r\n        isLoggedIn: true,\r\n        isLoading: false\r\n      };\r\n    }\r\n    case 'error': {\r\n      return {\r\n        ...state,\r\n        error: 'Incorrect username or password entered',\r\n        isLoggedIn: false,\r\n        isLoading: false,\r\n        username: '',\r\n        password: '',\r\n        isFocused: true\r\n      };\r\n    }\r\n    case 'logout': {\r\n      return {\r\n        ...state,\r\n        isLoggedIn: false,\r\n        username: '',\r\n        password: '',\r\n        error: ''\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default function LoginWithReducer() {\r\n  const [state, dispatch] = useReducer(loginReducer, initialState);\r\n  const { username, password, isLoading, isLoggedIn, error, isFocused } = state;\r\n  const usernameRef = useRef(null);\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    dispatch({ type: verifyLogin });\r\n    try {\r\n      await verifyLogin({ username, password });\r\n      dispatch({ type: 'success' });\r\n    } catch (error) {\r\n      dispatch({ type: 'error' });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isFocused) {\r\n      usernameRef.current.focus();\r\n    }\r\n  }, [isFocused]);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.setItem(\"logged_in\", false);\r\n    dispatch({ type: 'logout' });\r\n    setLoggedIn(false)\r\n    console.log('logged out')\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n     \r\n        {loggedIn ? (\r\n          <>\r\n            {/* <h1>Welcome {username}!</h1> */}\r\n            <HomePage username={username} logout={handleLogout}/>\r\n            {/* <button onClick={() => dispatch({ type: 'logout' })}>\r\n              Log Out\r\n            </button> */}\r\n          </>\r\n        ) : (\r\n          <div className=\"login-container\">\r\n          <form className=\"form\" onSubmit={handleSubmit}>\r\n            {error && <p className=\"error\">{error} </p>}\r\n            <p>Please Login!</p>\r\n            <input\r\n              type=\"text\"\r\n              ref={usernameRef}\r\n              placeholder=\"Enter username\"\r\n              value={username}\r\n              autoFocus\r\n              onChange={e =>\r\n                dispatch({\r\n                  type: 'field',\r\n                  fieldName: 'username',\r\n                  payload: e.currentTarget.value\r\n                })\r\n              }\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Enter password\"\r\n              value={password}\r\n              onChange={e =>\r\n                dispatch({\r\n                  type: 'field',\r\n                  fieldName: 'password',\r\n                  payload: e.currentTarget.value\r\n                })\r\n              }\r\n            />\r\n            <button className=\"submit\" type=\"submit\" disabled={isLoading}>\r\n              {isLoading ? 'Logging In.....' : 'Log In'}\r\n            </button>\r\n          </form>\r\n          </div>\r\n        )}\r\n\r\n    </div>\r\n  );\r\n}"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,MAAvC,EAA+CC,QAA/C,QAA+D,OAA/D;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,WAAT,QAA4B,SAA5B;AAEA,MAAMC,YAAY,GAAG;EACnBC,QAAQ,EAAE,EADS;EAEnBC,QAAQ,EAAE,EAFS;EAGnBC,SAAS,EAAE,KAHQ;EAInBC,UAAU,EAAE,KAJO;EAKnBC,KAAK,EAAE;AALY,CAArB;;AAQA,SAASC,YAAT,CAAsBC,KAAtB,EAA6BC,MAA7B,EAAqC;EACnC,QAAQA,MAAM,CAACC,IAAf;IACE,KAAK,OAAL;MAAc;QACZ,OAAO,EACL,GAAGF,KADE;UAEL,CAACC,MAAM,CAACE,SAAR,GAAoBF,MAAM,CAACG;QAFtB,CAAP;MAID;;IACD,KAAK,OAAL;MAAc;QACZ,OAAO,EACL,GAAGJ,KADE;UAELF,KAAK,EAAE,EAFF;UAGLF,SAAS,EAAE,IAHN;UAILS,SAAS,EAAE;QAJN,CAAP;MAMD;;IACD,KAAK,SAAL;MAAgB;QACd,OAAO,EACL,GAAGL,KADE;UAELH,UAAU,EAAE,IAFP;UAGLD,SAAS,EAAE;QAHN,CAAP;MAKD;;IACD,KAAK,OAAL;MAAc;QACZ,OAAO,EACL,GAAGI,KADE;UAELF,KAAK,EAAE,wCAFF;UAGLD,UAAU,EAAE,KAHP;UAILD,SAAS,EAAE,KAJN;UAKLF,QAAQ,EAAE,EALL;UAMLC,QAAQ,EAAE,EANL;UAOLU,SAAS,EAAE;QAPN,CAAP;MASD;;IACD,KAAK,QAAL;MAAe;QACb,OAAO,EACL,GAAGL,KADE;UAELH,UAAU,EAAE,KAFP;UAGLH,QAAQ,EAAE,EAHL;UAILC,QAAQ,EAAE,EAJL;UAKLG,KAAK,EAAE;QALF,CAAP;MAOD;;IACD;MACE,OAAOE,KAAP;EA3CJ;AA6CD;;AAED,eAAe,SAASM,gBAAT,GAA4B;EACzC,MAAM,CAACN,KAAD,EAAQO,QAAR,IAAoBpB,UAAU,CAACY,YAAD,EAAeN,YAAf,CAApC;EACA,MAAM;IAAEC,QAAF;IAAYC,QAAZ;IAAsBC,SAAtB;IAAiCC,UAAjC;IAA6CC,KAA7C;IAAoDO;EAApD,IAAkEL,KAAxE;EACA,MAAMQ,WAAW,GAAGnB,MAAM,CAAC,IAAD,CAA1B;;EAEA,MAAMoB,YAAY,GAAG,MAAMC,CAAN,IAAW;IAC9BA,CAAC,CAACC,cAAF;IACAJ,QAAQ,CAAC;MAAEL,IAAI,EAAEV;IAAR,CAAD,CAAR;;IACA,IAAI;MACF,MAAMA,WAAW,CAAC;QAAEE,QAAF;QAAYC;MAAZ,CAAD,CAAjB;MACAY,QAAQ,CAAC;QAAEL,IAAI,EAAE;MAAR,CAAD,CAAR;IACD,CAHD,CAGE,OAAOJ,KAAP,EAAc;MACdS,QAAQ,CAAC;QAAEL,IAAI,EAAE;MAAR,CAAD,CAAR;IACD;EACF,CATD;;EAWAd,SAAS,CAAC,MAAM;IACd,IAAIiB,SAAJ,EAAe;MACbG,WAAW,CAACI,OAAZ,CAAoBC,KAApB;IACD;EACF,CAJQ,EAIN,CAACR,SAAD,CAJM,CAAT;;EAMA,MAAMS,YAAY,GAAG,MAAM;IACzBC,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkC,KAAlC;IACAT,QAAQ,CAAC;MAAEL,IAAI,EAAE;IAAR,CAAD,CAAR;IACAe,WAAW,CAAC,KAAD,CAAX;IACAC,OAAO,CAACC,GAAR,CAAY,YAAZ;EACD,CALD;;EAOA,oBACE;IAAK,SAAS,EAAC,KAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAEKC,QAAQ,gBACP,uDAEE,oBAAC,QAAD;IAAU,QAAQ,EAAE1B,QAApB;IAA8B,MAAM,EAAEoB,YAAtC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFF,CADO,gBASP;IAAK,SAAS,EAAC,iBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACA;IAAM,SAAS,EAAC,MAAhB;IAAuB,QAAQ,EAAEL,YAAjC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACGX,KAAK,iBAAI;IAAG,SAAS,EAAC,OAAb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAsBA,KAAtB,MADZ,eAEE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,mBAFF,eAGE;IACE,IAAI,EAAC,MADP;IAEE,GAAG,EAAEU,WAFP;IAGE,WAAW,EAAC,gBAHd;IAIE,KAAK,EAAEd,QAJT;IAKE,SAAS,MALX;IAME,QAAQ,EAAEgB,CAAC,IACTH,QAAQ,CAAC;MACPL,IAAI,EAAE,OADC;MAEPC,SAAS,EAAE,UAFJ;MAGPC,OAAO,EAAEM,CAAC,CAACW,aAAF,CAAgBC;IAHlB,CAAD,CAPZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAHF,eAiBE;IACE,IAAI,EAAC,UADP;IAEE,WAAW,EAAC,gBAFd;IAGE,KAAK,EAAE3B,QAHT;IAIE,QAAQ,EAAEe,CAAC,IACTH,QAAQ,CAAC;MACPL,IAAI,EAAE,OADC;MAEPC,SAAS,EAAE,UAFJ;MAGPC,OAAO,EAAEM,CAAC,CAACW,aAAF,CAAgBC;IAHlB,CAAD,CALZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAjBF,eA6BE;IAAQ,SAAS,EAAC,QAAlB;IAA2B,IAAI,EAAC,QAAhC;IAAyC,QAAQ,EAAE1B,SAAnD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACGA,SAAS,GAAG,iBAAH,GAAuB,QADnC,CA7BF,CADA,CAXN,CADF;AAmDD"},"metadata":{},"sourceType":"module"}